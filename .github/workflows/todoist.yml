name: Todoist Readme Stats

on:
  workflow_dispatch:
  schedule:
    # Se ejecuta cada 12 horas
    - cron: '0 */12 * * *'

jobs:
  update-readme:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Actualizar Todoist Stats
        # Usamos este fork que actualmente est√° mantenido por la comunidad
        uses: t-richards/todoist-readme@v1
        with:
          # Debe coincidir con el nombre del Secret que creaste en el paso 2
          TODOIST_API_KEY: ${{ secrets.TODOIST_API_KEY }}
          # Puedes personalizar el formato si lo deseas
          TEXT_TO_REPLACE: "\\n"
          MARKDOWN_TEXT: |
            üèÜ **{total_karma_points}** Karma Points
            üå∏ **{completed_tasks_today}** tareas completadas hoy
            ‚úÖ **{completed_tasks}** tareas completadas en total
            ‚è≥ Racha m√°s larga de **{longest_streak}** d√≠as
